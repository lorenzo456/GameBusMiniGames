(self.webpackChunkopentrivia=self.webpackChunkopentrivia||[]).push([[8793],{8107:(e,t,n)=>{"use strict";n.d(t,{Uw:()=>a,fo:()=>o}),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global&&global;var r=(()=>(function(e){e.Unimplemented="UNIMPLEMENTED",e.Unavailable="UNAVAILABLE"}(r||(r={})),r))();class i extends Error{constructor(e,t){super(e),this.message=e,this.code=t}}const s=(e=>e.Capacitor=(e=>{var t,n,s,o,a;const l=e.CapacitorCustomPlatform||null,c=e.Capacitor||{},d=c.Plugins=c.Plugins||{},u=e.CapacitorPlatforms,h=(null===(t=null==u?void 0:u.currentPlatform)||void 0===t?void 0:t.getPlatform)||(()=>null!==l?l.name:(e=>{var t,n;return(null==e?void 0:e.androidBridge)?"android":(null===(n=null===(t=null==e?void 0:e.webkit)||void 0===t?void 0:t.messageHandlers)||void 0===n?void 0:n.bridge)?"ios":"web"})(e)),p=(null===(n=null==u?void 0:u.currentPlatform)||void 0===n?void 0:n.isNativePlatform)||(()=>"web"!==h()),v=(null===(s=null==u?void 0:u.currentPlatform)||void 0===s?void 0:s.isPluginAvailable)||(e=>{const t=m.get(e);return!!(null==t?void 0:t.platforms.has(h()))||!!g(e)}),g=(null===(o=null==u?void 0:u.currentPlatform)||void 0===o?void 0:o.getPluginHeader)||(e=>{var t;return null===(t=c.PluginHeaders)||void 0===t?void 0:t.find(t=>t.name===e)}),m=new Map,w=(null===(a=null==u?void 0:u.currentPlatform)||void 0===a?void 0:a.registerPlugin)||((e,t={})=>{const n=m.get(e);if(n)return console.warn(`Capacitor plugin "${e}" already registered. Cannot register plugins twice.`),n.proxy;const s=h(),o=g(e);let a;const u=n=>{let d;const u=(...u)=>{const h=(async()=>(!a&&s in t?a=a="function"==typeof t[s]?await t[s]():t[s]:null!==l&&!a&&"web"in t&&(a=a="function"==typeof t.web?await t.web():t.web),a))().then(t=>{const a=((t,n)=>{var a,l;if(!o){if(t)return null===(l=t[n])||void 0===l?void 0:l.bind(t);throw new i(`"${e}" plugin is not implemented on ${s}`,r.Unimplemented)}{const r=null==o?void 0:o.methods.find(e=>n===e.name);if(r)return"promise"===r.rtype?t=>c.nativePromise(e,n.toString(),t):(t,r)=>c.nativeCallback(e,n.toString(),t,r);if(t)return null===(a=t[n])||void 0===a?void 0:a.bind(t)}})(t,n);if(a){const e=a(...u);return d=null==e?void 0:e.remove,e}throw new i(`"${e}.${n}()" is not implemented on ${s}`,r.Unimplemented)});return"addListener"===n&&(h.remove=async()=>d()),h};return u.toString=()=>`${n.toString()}() { [capacitor code] }`,Object.defineProperty(u,"name",{value:n,writable:!1,configurable:!1}),u},p=u("addListener"),v=u("removeListener"),w=(e,t)=>{const n=p({eventName:e},t),r=async()=>{const r=await n;v({eventName:e,callbackId:r},t)},i=new Promise(e=>n.then(()=>e({remove:r})));return i.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()},i},f=new Proxy({},{get(e,t){switch(t){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return o?w:p;case"removeListener":return v;default:return u(t)}}});return d[e]=f,m.set(e,{name:e,proxy:f,platforms:new Set([...Object.keys(t),...o?[s]:[]])}),f});return c.convertFileSrc||(c.convertFileSrc=e=>e),c.getPlatform=h,c.handleError=t=>e.console.error(t),c.isNativePlatform=p,c.isPluginAvailable=v,c.pluginMethodNoop=(e,t,n)=>Promise.reject(`${n} does not have an implementation of "${t}".`),c.registerPlugin=w,c.Exception=i,c.DEBUG=!!c.DEBUG,c.isLoggingEnabled=!!c.isLoggingEnabled,c.platform=c.getPlatform(),c.isNative=c.isNativePlatform(),c})(e))("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{}),o=s.registerPlugin;class a{constructor(e){this.listeners={},this.windowListeners={},e&&(console.warn(`Capacitor WebPlugin "${e.name}" config object was deprecated in v3 and will be removed in v4.`),this.config=e)}addListener(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t);const n=this.windowListeners[e];n&&!n.registered&&this.addWindowListener(n);const r=async()=>this.removeListener(e,t),i=Promise.resolve({remove:r});return Object.defineProperty(i,"remove",{value:async()=>{console.warn("Using addListener() without 'await' is deprecated."),await r()}}),i}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,t){const n=this.listeners[e];n&&n.forEach(e=>e(t))}hasListeners(e){return!!this.listeners[e].length}registerWindowListener(e,t){this.windowListeners[t]={registered:!1,windowEventName:e,pluginEventName:t,handler:e=>{this.notifyListeners(t,e)}}}unimplemented(e="not implemented"){return new s.Exception(e,r.Unimplemented)}unavailable(e="not available"){return new s.Exception(e,r.Unavailable)}async removeListener(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);this.listeners[e].splice(r,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}}},2737:(e,t,n)=>{"use strict";n.d(t,{s:()=>w});var r=n(1855),i=n(9582),s=n(2850),o=n(267),a=n(7535),l=n(8561),c=n(2812),d=n(4089);const u=(0,n(8107).fo)("Network",{web:()=>n.e(9831).then(n.bind(n,9831)).then(e=>new e.NetworkWeb)});var h=n(7272),p=n(1887),v=n(6730),g=n(4683),m=n(6411);let w=(()=>{class e{constructor(e,t,n,s){this.http=e,this.cachingService=t,this.toastController=n,this.apiService2=s,this.answerSubject=new i.xQ,this.answer$=this.answerSubject.asObservable(),this.connected=!0,this.triviaQuestionPerCategory=100,u.addListener("networkStatusChange",e=>(0,r.mG)(this,void 0,void 0,function*(){this.connected=e.connected})),this.toastController.create({animated:!1}).then(e=>{e.present(),e.dismiss()})}setFrameData(e){this.frameData=e}getFrameData(){return this.frameData?this.frameData:(console.log("WARNING: using mocked FrameData for use in stand-alone mode"),{activityForm:null,gameData:[],scheme:null,lastActivity:null,negativePointsCheck:{canFireAll:!1,items:[]}})}broadcastAnswer(e){this.answerSubject.next(e)}getAllCachedAnswers(){return(0,r.mG)(this,void 0,void 0,function*(){return this.cachingService.getAllCachedAnswers()})}observeCachedAnswers(){return(0,s.D)(this.cachingService.getAllCachedAnswers())}getTriviaCategoryMetadata(e,t){let n=[];for(var r of e)this.getData("https://opentdb.com/api_count.php?category="+r.id,t).subscribe(e=>{n.push(e)});return(0,o.of)(n)}getTriviaQuestions(e,t){let n=new i.xQ,r=n.asObservable(),s=[];return this.apiService2.getCategories().then(r=>{const i=r.find(t=>t.id===e);this.getData("https://my-json-server.typicode.com/lorenzo456/Diabetes-Questions/"+i.name,t).pipe((0,l.U)(e=>e.results)).subscribe(e=>{s=e,n.next(s)})},e=>{console.error(e),(0,a._)(e)}),n.next(s),r}getNumQuestionsForCategory(e,t){return this.getData("https://opentdb.com/api_count.php?category="+e.id,t).pipe((0,l.U)(e=>e.category_question_count))}getUsers(e){return this.getData("https://randomuser.me/api?results=10",e).pipe((0,l.U)(e=>e.results))}getData(e,t=!1){return this.connected?t?this.callAndCache(e):(0,s.D)(this.cachingService.getCachedRequest(e)).pipe((0,c.w)(t=>t?(0,o.of)(t):this.callAndCache(e))):(this.toastController.create({message:"You are viewing offline data.",duration:2e3}).then(e=>{e.present()}),(0,s.D)(this.cachingService.getCachedRequest(e)))}callAndCache(e){return this.http.get(e).pipe((0,d.b)(t=>{this.cachingService.cacheRequest(e,t)}))}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(p.eN),h.LFG(v.$),h.LFG(g.yF),h.LFG(m._))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},6411:(e,t,n)=>{"use strict";n.d(t,{_:()=>p});var r=n(1855),i=n(1887),s=n(7535),o=n(8744);function a(e=-1){return t=>t.lift(new l(e,t))}class l{constructor(e,t){this.count=e,this.source=t}call(e,t){return t.subscribe(new c(e,this.count,this.source))}}class c extends o.L{constructor(e,t,n){super(e),this.count=t,this.source=n}error(e){if(!this.isStopped){const{source:t,count:n}=this;if(0===n)return super.error(e);n>-1&&(this.count=n-1),t.subscribe(this._unsubscribeAndRecycle())}}}var d=n(8561),u=n(2072),h=n(7272);let p=(()=>{class e{constructor(e){this.http=e,this.base_path="https://opentdb.com/",this.new_path="https://my-json-server.typicode.com/lorenzo456/Diabetes-Questions/",this.httpOptions={headers:new i.WM({"Content-Type":"application/json"})}}handleError(e){return e.error instanceof ErrorEvent?console.error("An error occurred:",e.error.message):console.error(`Backend returned code ${e.status}, body was: ${e.error}`),(0,s._)("Something bad happened; please try again later.")}getCategories(){return(0,r.mG)(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.categories?e(this.categories):this.getCategories_O().toPromise().then(t=>{let n=[],r=t.map(e=>{let t=this.getCountOfCategory_O(e.id).toPromise();return n.push(t),t.then(t=>{e.numQuestions=t.total_question_count}),e});this.categories=r,Promise.all(n).then(t=>{e(r)})},e=>{console.error(e),t(e)})})})}getCategories_O(){return this.http.get(this.new_path+"trivia_categories").pipe((0,d.U)(e=>e.trivia_categories),a(2),(0,u.K)(this.handleError))}getCountOfCategory_O(e){return this.http.get(this.new_path+"api_count").pipe((0,d.U)(e=>e.category_question_count),a(2),(0,u.K)(this.handleError))}}return e.\u0275fac=function(t){return new(t||e)(h.LFG(i.eN))},e.\u0275prov=h.Yz7({token:e,factory:e.\u0275fac,providedIn:"root"}),e})()},5709:(e,t,n)=>{"use strict";n.d(t,{m:()=>s});var r=n(6274),i=n(7272);let s=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=i.oAB({type:e}),e.\u0275inj=i.cJS({imports:[[r.ez]]}),e})()}}]);